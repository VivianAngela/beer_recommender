{% extends 'base.html' %}

{% block body %}
  <section class="header">
    <h2 class="title">Beer Recommendation Engine</h2>
  </section>
  <hr />

  <div class="content">
    {% if not beer_inputted %}
      <h1>
        Enter the name of a beer!
      </h1>
    {% endif%}
    <form method="POST">
      {{ form.hidden_tag() }}
      <div class="row">
        <div class="three columns">
          {{ form.beer_input.label }} {{ form.beer_input() }}
        </div>
      </div>
      <div class="row">
        <button type="submit" class="button-primary">Submit</button>
      </div>
    </form>
    <h4>
      {% if beer_inputted %}
      Here are some beers like {{form.data.beer_input}}:
      <h6>
        {% for beer in similar_beers %}
        <a href=http://www.beeradvocate.com{{beer[1]}}>{{beer[0]}}</a> by <a href={{beer[3]}}>{{beer[2]}}</a><br>
        {% endfor %}
      </h6>
      {% endif %}
    </h4>
    
  </div>
{% endblock body %}

{% block js %}
 <script>
  $(function() {
      $.ajax({
          url: '{{ url_for("autocomplete") }}'
          }).done(function (data) {
              $('#beer_input').autocomplete({
                  source: data.beer,
                  minLength: 2
              })
              .autocomplete( "instance" )._renderItem = function( ul, item ) {
                return $( "<li>" )
                  .append( "<a>" + item.label + "</a>" )
                  .appendTo( ul );
              };
          });
      });
  </script>
{% endblock js %}